parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"f9V3":[function(require,module,exports) {
"use strict";function e(e){return JSON.parse(localStorage.getItem(e))}function t(e,t){localStorage.setItem(e,JSON.stringify(t))}function o(e){localStorage.removeItem(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDBdata=e,exports.setDBdata=t,exports.removeDBdata=o;
},{}],"Z3ve":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.renderFavorites=void 0;var e=require("../db");const t=document.querySelector(".favorite-ul"),a=a=>{let n="<p>You don't have favorite movies</p>";if((null==a?void 0:a.length)>0){const t=(0,e.getDBdata)("movies"),r=a.map(e=>t[e]);(0,e.removeDBdata)("favoriteMovies"),(0,e.setDBdata)("favoriteMovies",r),n=r.map(e=>{let{id:t,name:a}=e;return'\n      <li class="favorite-text" data-id="'.concat(t,'">\n      <span class="favorite-name">&rarr;&nbsp;&nbsp;').concat(a,'</span>\n      <span class="delete-mark" data-id="').concat(t,'">&times;</span>\n      \n      </li>\n      ')}).join("")}t.innerHTML="",t.innerHTML=n};exports.renderFavorites=a;
},{"../db":"f9V3"}],"kb4S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.renderAllMoviesGrid=n;var e=require("../db");const t=document.querySelector(".movies-wrapper");function n(n){if(!n)return t.innerHTML="",void(t.innerHTML='\n      <div class="allert-warning text-center " > localStorage empty</ >\n        <div class="allert-warning text-center ">Reload the app to get movies from the server</div>\n      ');const a=Object.values(n).map(t=>{let{id:n,img:a,name:i,year:r}=t,c=(0,e.getDBdata)("favoriteMoviesId");const o=(null==c?void 0:c.includes(n.toString()))?'data-id="'.concat(n,'" data-star="favorite"'):'data-id="'.concat(n,'" data-star="white" '),s=(null==c?void 0:c.includes(n.toString()))?"star-gold":"star-white";return'\n        <div class="card" '.concat(o,'" >\n        <div class="star ').concat(s,'" ></div>\n        <img src="').concat(a,'" class="movie-img" alt="').concat(i,'">\n        <div class="movie-body">\n          <p class="movie-text text-center">').concat(i,'</p>\n          <p class="movie-text text-center">').concat(r,"</p>\n        </div>\n      </div>\n      ")}).join("");t.innerHTML="",t.innerHTML=a}
},{"../db":"f9V3"}],"tTJL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.renderAllMoviesList=i;var n=require("../db"),e=require("../helpers");const t=document.querySelector(".movies-wrapper");function i(i){if(!i)return t.innerHTML="",void(t.innerHTML='\n      <div class="allert-warning text-center " > localStorage empty</ >\n        <div class="allert-warning text-center ">Reload the app to get movies from the server</div>\n      ');const a=Object.values(i).map(t=>{let{id:i,img:a,name:s,year:c,description:r,genres:o}=t,d=(0,n.getDBdata)("favoriteMoviesId");const l=(null==d?void 0:d.includes(i.toString()))?'data-id="'.concat(i,'" data-star="favorite"'):'data-id="'.concat(i,'" data-star="white" '),v=(null==d?void 0:d.includes(i.toString()))?"star-gold":"star-white",m=o.map(n=>"<span>".concat(n,"</span>")).join("");return'\n        <div class="card list" '.concat(l,'" >\n          <div class="star ').concat(v,'" ></div>\n          <div class="movie-content-left">\n \n           <img src="').concat(a,'" class="movie-img" alt="').concat(s,'">\n          </div>\n\n          <div class="movie-content-rigth">\n\n            <div class="movie-title">\n              <span class="movie-text text-center">').concat(s,'</span>\n              <span class="movie-text text-center">').concat(c,'</span>\n            </div>\n\n            <div class="movie-description">\n              ').concat((0,e.truncate)(r,120),'\n            </div>\n\n            <div class="movie-geners">\n             ').concat(m,"\n            </div>\n\n          </div>\n\n        </div>\n      ")}).join("");t.innerHTML="",t.innerHTML=a}
},{"../db":"f9V3","../helpers":"EDcV"}],"kw6C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.openNodal=o,exports.clickFavoriteUl=d,exports.changeMoviesLayout=n,exports.changeSelectedGener=c;var e=require("./helpers"),t=require("./db"),r=require("./renders/renderFavorites"),s=require("./renders/renderAllMoviesGrid"),a=require("./renders/renderAllMoviesList");function i(r){const s=r.target.closest(".star");s.classList.contains("star-gold")?(s.classList.remove("star-gold"),s.classList.add("star-white")):(s.classList.remove("star-white"),s.classList.add("star-gold"));const a=r.target.closest(".card");"white"===a.dataset.star?a.dataset.star="favorite":a.dataset.star="white";const i=(0,e.getFavorites)();return(0,t.removeDBdata)("favoriteMoviesId"),(0,t.setDBdata)("favoriteMoviesId",i),i}function o(t){if(t.target.closest(".star")){const e=i(t);(0,r.renderFavorites)(e)}t.target.closest(".movie-img")&&(0,e.openModalMovie)(t),t.target.closest(".favorite-name")&&(0,e.openModalMovie)(t)}const l=document.querySelector(".movies-wrapper");function d(e){const s=e.target.closest(".delete-mark");if(s){const e=s.dataset.id;let a=[...l.querySelectorAll(".card")].filter(t=>+t.dataset.id==+e)[0];"white"===a.dataset.star?a.dataset.star="favorite":a.dataset.star="white",a.querySelector(".star").classList.remove("star-gold"),a.querySelector(".star").classList.add("star-white");let i=(0,t.getDBdata)("favoriteMovies").filter(t=>+t.id!=+e);(0,t.removeDBdata)("favoriteMovies"),(0,t.setDBdata)("favoriteMovies",i);let o=(0,t.getDBdata)("favoriteMoviesId").filter(t=>t!==e);(0,t.removeDBdata)("favoriteMoviesId"),(0,t.setDBdata)("favoriteMoviesId",o),(0,r.renderFavorites)(o)}}function n(e){const r=e.target,i=r.dataset.layout;if(i&&"grid"==i){var o;(0,t.removeDBdata)("currentView"),(0,t.setDBdata)("currentView",i);const e=(0,t.getDBdata)("moviesByGenres"),a=null!==(o=(0,t.getDBdata)("selectedGenre"))&&void 0!==o?o:"all";(0,s.renderAllMoviesGrid)(e[a]),r.classList.toggle("grid-gray"),r.classList.toggle("grid-dark");const l=r.parentElement.querySelector("[data-layout ='list']");l.classList.toggle("list-dark"),l.classList.toggle("list-gray")}if(i&&"list"==i){var l;(0,t.removeDBdata)("currentView"),(0,t.setDBdata)("currentView",i);const e=(0,t.getDBdata)("moviesByGenres"),s=null!==(l=(0,t.getDBdata)("selectedGenre"))&&void 0!==l?l:"all";(0,a.renderAllMoviesList)(e[s]),r.classList.toggle("list-gray"),r.classList.toggle("list-dark");const o=r.parentElement.querySelector("[data-layout ='grid']");o.classList.toggle("grid-dark"),o.classList.toggle("grid-gray")}}function c(e){var r;const i=e.target.value;(0,t.removeDBdata)(i),(0,t.setDBdata)("selectedGenre",i);const o=(0,t.getDBdata)("moviesByGenres");"grid"===(null!==(r=(0,t.getDBdata)("currentView"))&&void 0!==r?r:"list")?(0,s.renderAllMoviesGrid)(o[i]):(0,a.renderAllMoviesList)(o[i])}
},{"./helpers":"EDcV","./db":"f9V3","./renders/renderFavorites":"Z3ve","./renders/renderAllMoviesGrid":"kb4S","./renders/renderAllMoviesList":"tTJL"}],"ZbE9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addModalMovieListener=t,exports.addDashboardListener=s;var e=require("./handlers");function t(){const e=document.querySelector(".modal"),t=s=>{s.preventDefault();const c=s.target;(c.classList.contains("modal")||c.classList.contains("modal-close"))&&(e.classList.add("modal-hide"),e.removeEventListener("click",t))};e.addEventListener("click",t)}function s(){document.querySelector(".custom-select").addEventListener("click",e.changeSelectedGener),document.querySelector(".dashboard-view").addEventListener("click",e.changeMoviesLayout)}
},{"./handlers":"kw6C"}],"yS26":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.renderModalMovie=void 0;var n=require("../listeners"),e=require("../db");const i=document.querySelector(".modal > .movie-content"),s=s=>{const t=(0,e.getDBdata)("movies")[s];if(!t)return i.innerHTML="",void(i.innerHTML='\n      <div class="allert-warning text-center">localStorage empty. &nbsp;</div>\n      <div class="allert-warning text-center ">Reload app to get movies from the server</div>\n      ');const{name:a,img:o,description:r,year:c,genres:d,director:v,starring:l}=t,m=d.map(n=>"<span>".concat(n,"</span>")).join(""),p=l.map(n=>"&nbsp;<span>".concat(n,"</span>")).join(","),g='\n      <div class="modal-close">&times;</div>\n      <div class="movie-content-left">\n        <img src='.concat(o,' class="movie-img"\n          alt="').concat(a,'">\n        <div class="movie-star-year">\n          <div class="movie-star">&star;</div>\n          <div class="movie-year">').concat(c,'</div>\n        </div>\n        <div class="movie-geners">').concat(m,'\n        </div>\n      </div>\n     \n      <div class="movie-content-right">\n        <div class="movie-title">').concat(a,'</div>\n        <div class="movie-description">\n         ').concat(r,'\n        </div>\n        <div class="movie-director">\n          <span class="movie-text-bold">Director:</span>\n          ').concat(v,'\n        </div>\n        <div class="movie-starting">\n          <span class="movie-text-bold">Starting 2:&nbsp;</span>\n          ').concat(p,"\n          <span>Tony Goldwyn&nbsp;</span>\n        </div>\n       </div>\n\n      </div>\n    ");i.innerHTML="",i.innerHTML=g,(0,n.addModalMovieListener)()};exports.renderModalMovie=s;
},{"../listeners":"ZbE9","../db":"f9V3"}],"EDcV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.openModalMovie=t,exports.getFavorites=o,exports.groupMoviesByGenres=s,exports.truncate=n;var e=require("./renders/renderModalMovie");function t(t){var r;const o=null===(r=t.target.closest("[data-id]"))||void 0===r?void 0:r.dataset.id;o&&((0,e.renderModalMovie)(o),document.querySelector(".modal").classList.remove("modal-hide"))}const r=document.querySelector(".movies-wrapper");function o(){return[...r.querySelectorAll(".card")].filter(e=>"favorite"===e.dataset.star).map(e=>e.dataset.id)}function s(e,t){const r=[...new Set(e.map(e=>e[t]).flat())],o={all:e};for(let s of r)o[s]=e.filter(e=>e[t].includes(s));return r.unshift("all"),[r,o]}function n(e,t){if(e.length>t&&e.length>0){let r=e+" ";return r=e.substr(0,t),(r=(r=e.substr(0,r.lastIndexOf(" "))).length>0?r:e.substr(0,t))+"..."}return e}
},{"./renders/renderModalMovie":"yS26"}],"DzQG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.renderDashboard=void 0;var e=require("../db"),s=require("../listeners");const a=()=>{var a;const n=document.querySelector(".dashboard"),t=(null!==(a=(0,e.getDBdata)("genres"))&&void 0!==a?a:[]).map(e=>'<option value="'.concat(e,'">').concat(e,"</option>")).join(""),d='\n        <div class="dashboard-select">\n        <select class="custom-select">\n          <option selected>select genre</option>\n          '.concat(t,'\n        </select>\n      </div>\n\n      <div class="dashboard-view">\n        <div class="view-text">view as:</div>\n        <div class="svg-icon grid-dark" data-layout="grid"></div>\n        <div class="svg-icon list-gray" data-layout="list"></div>\n      </div>\n  ');n.innerHTML="",n.innerHTML=d,(0,s.addDashboardListener)()};exports.renderDashboard=a;
},{"../db":"f9V3","../listeners":"ZbE9"}],"rV7j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchData=s;var e=require("./db"),r=require("./helpers"),t=require("./renders/renderAllMoviesGrid"),a=require("./renders/renderDashboard");async function s(s){try{var o;const d=await fetch(s),i=await d.json();i.map(e=>{"The Matrix"===e.name&&(e.img="https://image.tmdb.org/t/p/w500/zE3dfBIYNMBXQrhQaCyZl99wwS0.jpg")});const l=new Set(i.map(e=>e.id)),c={};for(let e of l)c[e]=i.filter(r=>r.id===e)[0];(0,e.removeDBdata)("movies"),(0,e.setDBdata)("movies",c);const[m,v]=(0,r.groupMoviesByGenres)(i,"genres");(0,e.removeDBdata)("genres"),(0,e.setDBdata)("genres",m),(0,e.removeDBdata)("moviesByGenres"),(0,e.setDBdata)("moviesByGenres",v),(0,a.renderDashboard)();const g=null!==(o=(0,e.getDBdata)("selectedGenre"))&&void 0!==o?o:"all";(0,t.renderAllMoviesGrid)(v[g])}catch(n){console.log("Problem with fetching data: ".concat(n.message))}}
},{"./db":"f9V3","./helpers":"EDcV","./renders/renderAllMoviesGrid":"kb4S","./renders/renderDashboard":"DzQG"}],"Focm":[function(require,module,exports) {
"use strict";var e=require("./js/db"),r=require("./js/fetchData"),t=require("./js/renders/renderFavorites"),i=require("./js/handlers");const o="http://my-json-server.typicode.com/moviedb-tech/movies/list";(0,r.fetchData)(o),(0,t.renderFavorites)((0,e.getDBdata)("favoriteMoviesId"));const s=document.querySelector(".movie-gallery");s.addEventListener("click",i.openNodal);const c=document.querySelector(".favorite-ul");c.addEventListener("click",i.clickFavoriteUl);
},{"./js/db":"f9V3","./js/fetchData":"rV7j","./js/renders/renderFavorites":"Z3ve","./js/handlers":"kw6C"}]},{},["Focm"], null)
//# sourceMappingURL=/src.1d184b9c.js.map